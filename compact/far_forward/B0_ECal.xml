<!-- SPDX-License-Identifier: LGPL-3.0-or-later -->
<!-- Copyright (C) 2022 Sakib Rahman -->

<lccdd>
  <define>
    <constant name="B0ECal_rotation" value="ionCrossingAngle"/>
    <constant name="B0ECal_IP_distance" value="688*cm"/>
    <constant name="B0ECal_xcenter" value="B0ECal_IP_distance*sin(ionCrossingAngle)"/>
    <constant name="B0ECal_zcenter" value="B0ECal_IP_distance*cos(ionCrossingAngle)"/>
    <constant name="B0ECal_length" value="20*cm"/>
    <constant name="B0ECal_CrystalModule_width" value="2*cm"/>
    <constant name="B0ECal_CrystalModule_length" value="B0ECal_length"/>
    <constant name="B0ECal_CrystalModule_wrap" value="0.50*mm"/>
    <constant name="B0ECal_packman_rmin" value="3.7*cm"/>
    <constant name="B0ECal_packman_small_rmax" value="8*cm"/>
    <constant name="B0ECal_packman_large_rmax" value="15*cm"/>
    <constant name="B0ECal_packman_large_phimin" value="-120*deg"/>
    <constant name="B0ECal_packman_large_phimax" value="120*deg"/>
    <constant name="B0ECal_r_envelopeclearance" value="1*mm+(B0ECal_CrystalModule_width+2*B0ECal_CrystalModule_wrap)*sqrt(2)"/>
    <constant name="B0ECal_phi_envelopeclearance" value="(3.0*(B0ECal_CrystalModule_width+2*B0ECal_CrystalModule_wrap)*sqrt(2))/B0ECal_packman_small_rmax"/>
  </define>

  <detectors>

    <documentation>
      #### B0 Electromagnetic Calorimeter
    </documentation>
    <detector
        id="B0ECal_ID"
        name="B0ECal"
        type="B0_ECAL"
        readout="B0ECalHits">
      <position x="B0ECal_xcenter" y="0" z="B0ECal_zcenter"/>
      <rotation x="B0ECal_rotation" y="180*deg" z="0"/>
      <placements>
	  <individuals>
		  <module
			  id="1"
			  sizex="B0ECal_CrystalModule_width"
			  sizey="B0ECal_CrystalModule_width"
			  sizez="B0ECal_CrystalModule_length"
			  material="LYSO"
			  vis="GreenVis"/>

		  <wrapper
			  thickness="B0ECal_CrystalModule_wrap"
           		  material="Epoxy"
           		  vis="GrayVis"/>
			  
		  <placement id="1" x="-10.5*cm" y="14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="2" x="-8.4*cm" y="14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="3" x="-6.3*cm" y="14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="4" x="-4.2*cm" y="14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="5" x="-2.1*cm" y="14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="6" x="0.0*cm" y="14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="7" x="2.1*cm" y="14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="8" x="4.2*cm" y="14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="9" x="-10.5*cm" y="12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="10" x="-8.4*cm" y="12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="11" x="-6.3*cm" y="12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="12" x="-4.2*cm" y="12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="13" x="-2.1*cm" y="12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="14" x="0.0*cm" y="12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="15" x="2.1*cm" y="12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="16" x="4.2*cm" y="12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="17" x="6.3*cm" y="12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="18" x="8.4*cm" y="12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="19" x="-10.5*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="20" x="-8.4*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="21" x="-6.3*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="22" x="-4.2*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="23" x="-2.1*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="24" x="0.0*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="25" x="2.1*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="26" x="4.2*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="27" x="6.3*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="28" x="8.4*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="29" x="10.5*cm" y="10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="30" x="-6.3*cm" y="8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="31" x="-4.2*cm" y="8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="32" x="-2.1*cm" y="8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="33" x="0.0*cm" y="8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="34" x="2.1*cm" y="8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="35" x="4.2*cm" y="8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="36" x="6.3*cm" y="8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="37" x="8.4*cm" y="8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="38" x="10.5*cm" y="8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="39" x="-6.3*cm" y="6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="40" x="-4.2*cm" y="6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="41" x="-2.1*cm" y="6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="42" x="0.0*cm" y="6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="43" x="2.1*cm" y="6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="44" x="4.2*cm" y="6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="45" x="6.3*cm" y="6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="46" x="8.4*cm" y="6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="47" x="10.5*cm" y="6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="48" x="-6.3*cm" y="4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="49" x="-4.2*cm" y="4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="50" x="-2.1*cm" y="4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="51" x="0.0*cm" y="4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="52" x="2.1*cm" y="4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="53" x="4.2*cm" y="4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="54" x="6.3*cm" y="4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="55" x="8.4*cm" y="4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="56" x="10.5*cm" y="4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="57" x="12.6*cm" y="4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="58" x="-6.3*cm" y="2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="59" x="-4.2*cm" y="2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="60" x="4.2*cm" y="2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="61" x="6.3*cm" y="2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="62" x="8.4*cm" y="2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="63" x="10.5*cm" y="2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="64" x="12.6*cm" y="2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="65" x="-6.3*cm" y="0.0*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="66" x="-4.2*cm" y="0.0*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="67" x="4.2*cm" y="0.0*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="68" x="6.3*cm" y="0.0*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="69" x="8.4*cm" y="0.0*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="70" x="10.5*cm" y="0.0*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="71" x="12.6*cm" y="0.0*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="72" x="-6.3*cm" y="-2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="73" x="-4.2*cm" y="-2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="74" x="4.2*cm" y="-2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="75" x="6.3*cm" y="-2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="76" x="8.4*cm" y="-2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="77" x="10.5*cm" y="-2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="78" x="12.6*cm" y="-2.1*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="79" x="-6.3*cm" y="-4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="80" x="-4.2*cm" y="-4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="81" x="-2.1*cm" y="-4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="82" x="0.0*cm" y="-4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="83" x="2.1*cm" y="-4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="84" x="4.2*cm" y="-4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="85" x="6.3*cm" y="-4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="86" x="8.4*cm" y="-4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="87" x="10.5*cm" y="-4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="88" x="12.6*cm" y="-4.2*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="89" x="-6.3*cm" y="-6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="90" x="-4.2*cm" y="-6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="91" x="-2.1*cm" y="-6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="92" x="0.0*cm" y="-6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="93" x="2.1*cm" y="-6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="94" x="4.2*cm" y="-6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="95" x="6.3*cm" y="-6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="96" x="8.4*cm" y="-6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="97" x="10.5*cm" y="-6.3*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="98" x="-6.3*cm" y="-8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="99" x="-4.2*cm" y="-8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="100" x="-2.1*cm" y="-8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="101" x="0.0*cm" y="-8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="102" x="2.1*cm" y="-8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="103" x="4.2*cm" y="-8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="104" x="6.3*cm" y="-8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="105" x="8.4*cm" y="-8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="106" x="10.5*cm" y="-8.4*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="107" x="-10.5*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="108" x="-8.4*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="109" x="-6.3*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="110" x="-4.2*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="111" x="-2.1*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="112" x="0.0*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="113" x="2.1*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="114" x="4.2*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="115" x="6.3*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="116" x="8.4*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="117" x="10.5*cm" y="-10.5*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="118" x="-10.5*cm" y="-12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="119" x="-8.4*cm" y="-12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="120" x="-6.3*cm" y="-12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="121" x="-4.2*cm" y="-12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="122" x="-2.1*cm" y="-12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="123" x="0.0*cm" y="-12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="124" x="2.1*cm" y="-12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="125" x="4.2*cm" y="-12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="126" x="6.3*cm" y="-12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="127" x="8.4*cm" y="-12.6*cm" z="0." rotx="0." roty="0." rotz="0."/>

		  <placement id="128" x="-10.5*cm" y="-14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="129" x="-8.4*cm" y="-14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="130" x="-6.3*cm" y="-14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="131" x="-4.2*cm" y="-14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="132" x="-2.1*cm" y="-14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="133" x="0.0*cm" y="-14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="134" x="2.1*cm" y="-14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>
		  <placement id="135" x="4.2*cm" y="-14.7*cm" z="0." rotx="0." roty="0." rotz="0."/>

	  </individuals>
	  <disk
            rmin="B0ECal_packman_rmin"
            rintermediate="B0ECal_packman_small_rmax"
            rmax="B0ECal_packman_large_rmax"
            phimin="B0ECal_packman_large_phimin"
            phimax="B0ECal_packman_large_phimax"
            envelope="false"
            r_envelopeclearance="B0ECal_r_envelopeclearance"
            phi_envelopeclearance="B0ECal_phi_envelopeclearance"
		  material="Vacuum">
	  <module
		  sizex="B0ECal_CrystalModule_width"
		  sizey="B0ECal_CrystalModule_width"
		  sizez="B0ECal_CrystalModule_length"
		  material="LYSO"
		  vis="GreenVis"/>
	  <wrapper
		  thickness="B0ECal_CrystalModule_wrap"
           	  material="Epoxy"
          	  vis="GrayVis"/>
	  </disk>
  
      </placements>

    </detector>

  </detectors>

  <readouts>
    <comment>
      No segmentation since module is the smallest readout segmentation
    </comment>
    <readout name="B0ECalHits">
      <segmentation type="NoSegmentation" key="sector"/>
      <id>system:8,sector:4,module:20</id>
    </readout>
  </readouts>
</lccdd>
